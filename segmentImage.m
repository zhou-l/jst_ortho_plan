function [BW,maskedImage] = segmentImage(X)
%segmentImage Segment image using auto-generated code from imageSegmenter app
%  [BW,MASKEDIMAGE] = segmentImage(X) segments image X using auto-generated
%  code from the imageSegmenter app. The final segmentation is returned in
%  BW, and a masked image is returned in MASKEDIMAGE.

% Auto-generated by imageSegmenter app on 09-Nov-2020
%----------------------------------------------------


% Adjust data to span data range.
X = imadjust(X);

% Graph cut
foregroundInd = [913825 1017892 1033182 1033187 1033205 1039322 1039327 1039329 1039334 1054625 1054630 1054632 1054635 1054645 1063821 1063833 1063849 1063871 1079177 1085302 1085312 1085319 1103663 1103666 1103671 1103673 1109790 1109795 1125075 1125081 1134256 1134259 1134261 1149541 1149549 1149551 1155669 1170956 1180132 1180134 1180139 1180142 1180147 1180150 1180155 1180162 1180165 1180170 1180172 1195458 1195460 1195465 1343278 1361614 1367723 1367726 1383003 1413561 1428836 1453281 1466956 1499119 1552592 1552610 1561788 1567910 1567913 1577096 1583218 1584684 1598519 1607702 1613819 1623000 1632178 1633580 1638300 1647478 1647486 1653613 1653623 1662802 1668924 1678102 1684224 1684229 1684234 1684456 1684458 1684463 1684466 1684471 1684474 1684479 1684481 1684486 1684489 1684496 1684502 1684504 1684509 1684517 1684524 1684527 1684532 1684535 1684540 1684542 1684547 1684550 1684555 1684563 1684570 1684573 1684578 1684580 1684588 1684593 1684596 1684601 1684603 1684608 1684616 1684619 1684624 1684626 1693407 1693415 1693425 1693438 1693448 1693458 1693471 1693481 1693494 1693512 1693525 1693532 1693535 1693540 1693550 1693555 1693558 1693565 1693578 1693580 1693588 1693593 1693601 1693608 1693807 1699927 1709097 1709102 1709980 1718270 1718273 1718278 1718280 1718285 1718301 1718308 1733614 1733619 1733621 1810828 1942234 2036957 2153042 2262857 6350451 6375622 6375624 6390881 6390887 6396968 6396976 6396978 6396983 6412006 6412210 6412235 6421347 6421363 6436554 6436592 6436612 6693797 6693802 6693812 6693815 6702942 6702955 6718199 6718209 6724296 6748584 6763894 6980305 6980315 6980331 6980338 6980343 6980346 6995562 6995573 6995578 7004667 7004672 7004674 7004679 7004687 7004697 7004718 7019937 7019942 7026031 7026033 7026041 7044346 7044359 7050425 7050441 7074754 ];
backgroundInd = [1295977 1360260 1360283 1366413 1381706 1381713 1381726 1390917 1406217 1406227 1406230 1412345 1412350 1412373 1412380 1427683 1427691 1436861 1436866 1436874 1436876 1446050 1446052 1446057 1452172 1452177 1461352 1461355 1880632 1944803 1960083 2002863 2008975 2018143 2024255 2039537 2067043 2070099 2075122 2103715 2118995 2131219 2134275 2145550 2146499 2149553 2149555 2160858 2161777 2166998 2167019 2167889 2176217 2176243 2177057 2182373 2191553 2192337 2197675 2197683 2197691 2198447 2206861 2206864 2206866 2212996 2213004 2213009 2213017 2213027 2213037 2213047 2213726 2225950 2231396 2235118 2237518 2237523 2237531 2241228 2246701 2246706 2246709 2250396 2252821 2252826 2256508 2262002 2268116 2277292 2283424 2298719 2307895 2307898 2307903 2317071 2323185 2338478 2338480 2353773 2353781 2353783 2442915 2449027 2449029 2449031 2455144 2458200 2464316 2470430 2473487 2479603 2485715 2491827 2494886 2501000 2507112 2507114 2516285 2522397 2528511 2534625 2537683 2537684 2537686 2537688 2543808 6601567 6601590 6601600 6601606 6607618 6607626 6607656 6632028 6723449 ];
L = superpixels(X,38972);
BW = lazysnapping(X,L,foregroundInd,backgroundInd);

% Create masked image.
maskedImage = X;
maskedImage(~BW) = 0;
end

